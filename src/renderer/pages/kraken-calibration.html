<!DOCTYPE html>
<html lang="en">
  <head>
    <script type="module" src="./kraken-calibration.js"></script>
    <script src="../assets/js/tailwind.min.js"></script>
    <script src="../assets/js/font-awesome.min.js"></script>
    <meta http-equiv="X-Content-Security-Policy" content="default-src 'self'; script-src 'self'" />
    <title>Kraken Calibration</title>
  </head>

  <body class="h-full text-base-content bg-neutral-50">
    <div id="app-container" class="min-h-screen">
      <header class="bg-white border-b border-neutral-200 fixed w-full z-40">
        <div class="container mx-auto px-4 py-3 flex items-center justify-between">
          <div class="flex items-center space-x-4">
            <i class="fa-solid fa-brain text-2xl text-neutral-700"></i>
            <h1 class="text-xl">Kraken Calibration</h1>
          </div>
          <div class="flex items-center space-x-4">
            <div id="reference-pressure" class="px-4 py-2 bg-blue-100 text-blue-800 rounded-lg">
              Reference: <span id="reference-value">0</span> PSI
            </div>
          </div>
        </div>
      </header>

      <main id="main-content" class="pt-16 container mx-auto px-4">
        <!-- Back Button -->
        <div class="mt-5">
          <button
            id="back-button"
            class="flex items-center px-4 py-2 border border-neutral-300 bg-white text-neutral-700 rounded-md hover:bg-neutral-100 transition-colors duration-200"
          >
            <i class="fa-solid fa-arrow-left mr-2"></i> Back to Device List
          </button>
        </div>

        <div class="py-6">
          <!-- Calibration Settings -->
          <div id="calibration-settings" class="mb-6">
            <div class="bg-white rounded-lg border border-neutral-200 p-6">
              <h2 class="text-xl mb-4">Calibration Settings</h2>
              <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div>
                  <label class="block text-sm font-medium text-neutral-700 mb-2">
                    Tester Name
                  </label>
                  <input
                    type="text"
                    id="tester-name"
                    class="w-full px-3 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    placeholder="Enter tester name"
                  />
                </div>
                <div>
                  <label class="block text-sm font-medium text-neutral-700 mb-2">
                    Max Pressure (PSI)
                  </label>
                  <select
                    id="max-pressure"
                    class="w-full px-3 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  >
                    <option value="100">100 PSI</option>
                    <option value="200">200 PSI</option>
                    <option value="300">300 PSI</option>
                    <option value="500">500 PSI</option>
                  </select>
                </div>
                <div class="flex items-end">
                  <button
                    id="save-settings"
                    class="w-full px-4 py-2 bg-neutral-800 text-white rounded-lg hover:bg-neutral-700 transition-colors duration-200"
                  >
                    Save Settings
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Connected Sensors -->
          <div id="connected-sensors" class="mb-6">
            <div class="bg-white rounded-lg border border-neutral-200 p-6">
              <h2 class="text-xl mb-4">Connected Sensors</h2>
              <div id="sensor-cards" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <!-- Sensor cards will be populated here -->
              </div>
            </div>
          </div>

          <!-- Process Control -->
          <div id="process-control" class="mb-6">
            <div class="bg-white rounded-lg border border-neutral-200 p-6">
              <h2 class="text-xl mb-4">Process Control</h2>
              <div class="flex space-x-4">
                <button
                  id="start-calibration"
                  class="px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200"
                >
                  <i class="fa-solid fa-play mr-2"></i> Start Calibration
                </button>
                <button
                  id="start-verification"
                  class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 hidden"
                >
                  <i class="fa-solid fa-check mr-2"></i> Start Verification
                </button>
                <button
                  id="start-certification"
                  class="px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors duration-200 hidden"
                >
                  <i class="fa-solid fa-certificate mr-2"></i> Start Certification
                </button>
                <button
                  id="stop-process"
                  class="px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors duration-200 hidden"
                >
                  <i class="fa-solid fa-stop mr-2"></i> Stop Process
                </button>
                <button
                  id="view-results"
                  class="px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200 hidden"
                >
                  <i class="fa-solid fa-chart-bar mr-2"></i> View Results
                </button>
              </div>
            </div>
          </div>

          <!-- Process Logs -->
          <div id="process-logs" class="mb-6">
            <div class="bg-white rounded-lg border border-neutral-200 p-6">
              <h2 class="text-xl mb-4">Process Logs</h2>
              <div
                id="log-container"
                class="bg-neutral-900 text-green-400 p-4 rounded-lg h-64 overflow-y-auto font-mono text-sm"
              >
                <div id="log-content">
                  <p class="text-neutral-400">Ready to start calibration process...</p>
                </div>
              </div>
              <div class="mt-2 flex justify-end">
                <button
                  id="clear-logs"
                  class="text-sm text-neutral-600 hover:text-neutral-800"
                >
                  Clear Logs
                </button>
              </div>
            </div>
          </div>

          <!-- Sweep Results -->
          <div id="sweep-results" class="mb-6 hidden">
            <div class="bg-white rounded-lg border border-neutral-200 p-6">
              <div class="flex items-center justify-between mb-4">
                <h2 class="text-xl">Sweep Results</h2>
                <div class="flex space-x-2">
                  <button id="tab-calibration" class="px-4 py-2 bg-blue-600 text-white rounded-lg text-sm">
                    Calibration
                  </button>
                  <button id="tab-verification" class="px-4 py-2 bg-neutral-300 text-neutral-700 rounded-lg text-sm">
                    Verification
                  </button>
                  <button id="tab-certification" class="px-4 py-2 bg-neutral-300 text-neutral-700 rounded-lg text-sm">
                    Certification
                  </button>
                </div>
              </div>
              
              <div id="results-table" class="overflow-x-auto">
                <!-- Results table will be populated here -->
              </div>
            </div>
          </div>

          <!-- Device Calibration Progress -->
          <div id="device-calibration" class="mb-6 hidden">
            <div class="bg-white rounded-lg border border-neutral-200 p-6">
              <h2 class="text-xl mb-4">Device Calibration Progress</h2>
              <div id="calibration-progress" class="space-y-4">
                <!-- Progress cards will be populated here -->
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <!-- Alert Modal -->
    <div id="alert-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
      <div class="bg-white rounded-lg p-6 max-w-sm w-full mx-4">
        <div class="text-center">
          <i id="alert-icon" class="fa-solid fa-exclamation-triangle text-4xl text-yellow-500 mb-4"></i>
          <p id="alert-message" class="text-neutral-700 mb-4"></p>
          <button
            id="alert-ok"
            class="px-6 py-2 bg-neutral-800 text-white rounded-lg hover:bg-neutral-700"
          >
            OK
          </button>
        </div>
      </div>
    </div>
  </body>
</html>
