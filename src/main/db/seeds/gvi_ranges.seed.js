const gviRanges = [
  {
    name: '2"-50',
    readings: [
      [25, 0.091, 0.167],
      [35, 0.194, 0.27],
      [50, 0.425, 0.501],
      [60, 0.625, 0.701],
      [75, 0.985, 1.06],
      [100, 1.859, 1.935],
    ],
  },
  {
    name: '2.5"-100',
    readings: [
      [50, 0.26, 0.497],
      [75, 0.711, 0.948],
      [100, 1.338, 1.575],
      [120, 2.021, 2.258],
      [150, 3.236, 3.473],
      [200, 5.805, 6.041],
    ],
  },
  {
    name: '3"-150',
    readings: [
      [75, 0.185, 0.349],
      [100, 0.371, 0.534],
      [150, 0.939, 1.103],
      [175, 1.36, 1.523],
      [225, 2.21, 2.373],
      [300, 4.008, 4.172],
    ],
  },
  {
    name: '3"-200',
    readings: [
      [100, 0.308, 0.597],
      [150, 0.877, 1.165],
      [200, 1.658, 1.947],
      [225, 2.147, 2.436],
      [300, 3.945, 4.234],
      [400, 7.077, 7.365],
    ],
  },
  {
    name: '3"-250',
    readings: [
      [125, 0.488, 0.933],
      [200, 1.581, 2.026],
      [250, 2.616, 3.061],
      [350, 5.357, 5.802],
      [450, 8.85, 9.295],
      [500, 10.913, 11.358],
    ],
  },
  {
    name: '4"-250',
    readings: [
      [125, 0.218, 0.377],
      [200, 0.623, 0.781],
      [250, 0.981, 1.14],
      [350, 1.912, 2.071],
      [450, 3.162, 3.321],
      [500, 3.892, 4.05],
    ],
  },
  {
    name: '4"-300',
    readings: [
      [150, 0.307, 0.535],
      [250, 0.946, 1.174],
      [300, 1.37, 1.598],
      [400, 2.462, 2.69],
      [500, 3.857, 4.085],
      [600, 5.587, 5.815],
    ],
  },
  {
    name: '4"-400',
    readings: [
      [200, 0.498, 0.906],
      [300, 1.279, 1.688],
      [400, 2.371, 2.78],
      [500, 3.767, 4.175],
      [700, 7.579, 7.988],
      [800, 10.013, 10.422],
    ],
  },
  {
    name: '4"-450',
    readings: [
      [225, 0.614, 1.129],
      [350, 1.734, 2.249],
      [450, 2.984, 3.499],
      [600, 5.443, 5.959],
      [800, 9.96, 10.475],
      [900, 12.624, 13.139],
    ],
  },
  {
    name: '4"-500',
    readings: [
      [250, 0.675, 1.312],
      [400, 2.227, 2.863],
      [500, 3.657, 4.293],
      [700, 7.474, 8.111],
      [900, 12.564, 13.2],
      [1000, 15.584, 16.221],
    ],
  },
  {
    name: '5"-450',
    readings: [
      [225, 0.347, 0.666],
      [350, 1.056, 1.376],
      [450, 1.833, 2.153],
      [600, 3.385, 3.705],
      [800, 6.169, 6.489],
      [900, 7.838, 8.158],
    ],
  },
  {
    name: '5"-500',
    readings: [
      [250, 0.436, 0.832],
      [400, 1.378, 1.775],
      [500, 2.266, 2.662],
      [700, 4.647, 5.044],
      [900, 7.8, 8.196],
      [1000, 9.705, 10.101],
    ],
  },
  {
    name: '5"-750',
    readings: [
      [375, 0.941, 1.829],
      [550, 2.54, 3.429],
      [750, 5.123, 6.012],
      [1000, 9.458, 10.347],
      [1400, 18.852, 19.74],
      [1500, 21.767, 22.656],
    ],
  },
  {
    name: '6"-500',
    readings: [
      [250, 0.169, 0.304],
      [400, 0.498, 0.633],
      [500, 0.797, 0.932],
      [700, 1.573, 1.708],
      [900, 2.652, 2.787],
      [1000, 3.302, 3.436],
    ],
  },
  {
    name: '6"-750',
    readings: [
      [375, 0.361, 0.66],
      [550, 0.88, 1.179],
      [750, 1.73, 2.029],
      [1000, 3.219, 3.519],
      [1350, 5.923, 6.222],
      [1500, 7.33, 7.629],
    ],
  },
  {
    name: '6"-1000',
    readings: [
      [500, 0.598, 1.131],
      [750, 1.613, 2.146],
      [1000, 3.102, 3.636],
      [1250, 4.973, 5.507],
      [1750, 9.967, 10.5],
      [2000, 13.063, 13.596],
    ],
  },
  {
    name: '6"-1250',
    readings: [
      [625, 0.901, 1.739],
      [900, 2.3, 3.139],
      [1250, 4.821, 5.659],
      [1750, 9.814, 10.653],
      [2250, 16.649, 17.488],
      [2500, 20.541, 21.379],
    ],
  },
  {
    name: '6"-1500',
    readings: [
      [750, 1.28, 2.48],
      [1000, 2.769, 3.968],
      [1500, 6.88, 8.079],
      [2000, 12.73, 13.929],
      [2500, 20.36, 21.559],
      [3000, 29.384, 30.584],
    ],
  },
  {
    name: '8"-750',
    readings: [
      [375, 0.12, 0.217],
      [500, 0.244, 0.34],
      [750, 0.582, 0.679],
      [1000, 1.035, 1.131],
      [1300, 1.779, 1.875],
      [1500, 2.361, 2.457],
    ],
  },
  {
    name: '8"-1000',
    readings: [
      [500, 0.207, 0.379],
      [750, 0.545, 0.717],
      [1000, 0.998, 1.169],
      [1250, 1.604, 1.775],
      [1750, 3.195, 3.366],
      [2000, 4.207, 4.379],
    ],
  },
  {
    name: '8"-1250',
    readings: [
      [625, 0.325, 0.595],
      [800, 0.58, 0.85],
      [1250, 1.555, 1.825],
      [1750, 3.146, 3.416],
      [2250, 5.302, 5.572],
      [2500, 6.613, 6.883],
    ],
  },
  {
    name: '8"-1500',
    readings: [
      [750, 0.436, 0.826],
      [1000, 0.888, 1.278],
      [1500, 2.214, 2.604],
      [2000, 4.098, 4.488],
      [2500, 6.553, 6.943],
      [3000, 9.554, 9.944],
    ],
  },
  {
    name: '8"-2000',
    readings: [
      [1000, 0.738, 1.428],
      [1500, 2.064, 2.754],
      [2000, 3.948, 4.638],
      [2500, 6.403, 7.093],
      [3000, 9.404, 10.094],
      [4000, 16.903, 17.593],
    ],
  },
  {
    name: '8"-2500',
    readings: [
      [1250, 1.15, 2.229],
      [2000, 3.754, 4.832],
      [2500, 6.209, 7.288],
      [3500, 12.724, 13.802],
      [4500, 21.293, 22.372],
      [5000, 26.428, 27.506],
    ],
  },
  {
    name: '8"-3000',
    readings: [
      [1500, 1.631, 3.187],
      [2000, 3.515, 5.071],
      [3000, 8.971, 10.527],
      [4000, 16.47, 18.027],
      [5000, 26.189, 27.745],
      [6000, 38.136, 39.693],
    ],
  },
  {
    name: '8"-3500',
    readings: [
      [1750, 2.222, 4.339],
      [2500, 5.69, 7.807],
      [3500, 12.204, 14.322],
      [4500, 20.774, 22.891],
      [6000, 37.856, 39.973],
      [7000, 51.869, 53.986],
    ],
  },
  {
    name: '10"-1500',
    readings: [
      [750, 0.186, 0.342],
      [1000, 0.357, 0.513],
      [1500, 0.882, 1.038],
      [2000, 1.627, 1.784],
      [2500, 2.602, 2.758],
      [3000, 3.825, 3.981],
    ],
  },
  {
    name: '10"-2000',
    readings: [
      [1000, 0.296, 0.574],
      [1500, 0.821, 1.099],
      [2000, 1.567, 1.844],
      [2750, 3.12, 3.398],
      [3500, 5.14, 5.418],
      [4000, 6.808, 7.086],
    ],
  },
  {
    name: '10"-2500',
    readings: [
      [1250, 0.449, 0.877],
      [2000, 1.491, 1.92],
      [2500, 2.466, 2.894],
      [3500, 5.065, 5.493],
      [4500, 8.483, 8.912],
      [5000, 10.493, 10.922],
    ],
  },
  {
    name: '10"-3000',
    readings: [
      [1500, 0.654, 1.266],
      [2000, 1.4, 2.011],
      [3000, 3.597, 4.209],
      [4000, 6.641, 7.253],
      [5000, 10.402, 11.013],
      [6000, 14.982, 15.593],
    ],
  },
  {
    name: '10"-3000-OP',
    readings: [
      [1500, 1.093, 2.137],
      [2000, 2.361, 3.405],
      [3000, 5.97, 7.014],
      [4000, 11.067, 12.111],
      [5000, 17.577, 18.621],
      [6000, 25.579, 26.623],
    ],
  },
  {
    name: '10"-3500',
    readings: [
      [1750, 0.893, 1.723],
      [2500, 2.265, 3.095],
      [3500, 4.864, 5.694],
      [4500, 8.282, 9.112],
      [6000, 14.873, 15.703],
      [7000, 20.336, 21.166],
    ],
  },
  {
    name: '10"-4000',
    readings: [
      [2000, 1.162, 2.249],
      [3000, 3.359, 4.446],
      [4000, 6.404, 7.49],
      [5000, 10.164, 11.251],
      [7000, 20.208, 21.294],
      [8000, 26.622, 27.709],
    ],
  },
  {
    name: '10"-4500',
    readings: [
      [2250, 1.454, 2.871],
      [3500, 4.57, 5.988],
      [4500, 7.989, 9.406],
      [6000, 14.579, 15.996],
      [8000, 26.457, 27.874],
      [9000, 34.731, 36.148],
    ],
  },
  {
    name: '10"-5000',
    readings: [
      [2500, 1.824, 3.536],
      [3500, 4.423, 6.135],
      [5000, 8.875, 10.588],
      [7000, 19.895, 21.607],
      [9000, 34.583, 36.296],
      [10000, 41.952, 43.665],
    ],
  },
  {
    name: '12"-2000',
    readings: [
      [1000, 0.12, 0.231],
      [1500, 0.329, 0.439],
      [2000, 0.624, 0.734],
      [2500, 1.014, 1.124],
      [3500, 1.727, 1.837],
      [4000, 2.696, 2.806],
    ],
  },
  {
    name: '12"-2500',
    readings: [
      [1250, 0.174, 0.346],
      [1750, 0.432, 0.604],
      [2500, 0.982, 1.154],
      [3500, 1.697, 1.869],
      [4500, 3.003, 3.175],
      [5000, 4.21, 4.382],
    ],
  },
  {
    name: '12"-3000',
    readings: [
      [1500, 0.261, 0.508],
      [2000, 0.555, 0.802],
      [3000, 1.405, 1.652],
      [4000, 2.628, 2.875],
      [5250, 4.598, 4.846],
      [6000, 6.062, 6.309],
    ],
  },
  {
    name: '12"-3500',
    readings: [
      [1750, 0.352, 0.692],
      [2500, 0.904, 1.243],
      [3500, 1.614, 1.954],
      [4500, 2.919, 3.259],
      [6000, 6.023, 6.362],
      [7000, 8.315, 8.654],
    ],
  },
  {
    name: '12"-4000',
    readings: [
      [2000, 0.456, 0.901],
      [3000, 1.306, 1.751],
      [4000, 2.529, 2.974],
      [5000, 4.073, 4.518],
      [7000, 8.257, 8.702],
      [8000, 10.904, 11.349],
    ],
  },
  {
    name: '12"-4500',
    readings: [
      [2250, 0.57, 1.136],
      [3500, 1.5, 2.066],
      [4500, 2.806, 3.372],
      [6000, 5.903, 6.469],
      [7500, 9.471, 10.037],
      [9000, 13.86, 14.426],
    ],
  },
  {
    name: '12"-5000',
    readings: [
      [2500, 0.718, 1.419],
      [3500, 1.432, 2.133],
      [5000, 3.945, 4.646],
      [7000, 8.129, 8.83],
      [9000, 13.793, 14.494],
      [10000, 17.171, 17.871],
    ],
  },
  {
    name: '20"-8000',
    readings: [
      [4000, 0.289, 0.561],
      [6000, 0.847, 1.119],
      [8000, 1.565, 1.837],
      [10000, 2.522, 2.794],
      [14000, 5.134, 5.406],
      [16000, 6.662, 6.934],
    ],
  },
  {
    name: '4"-250-old',
    readings: [
      [125, 0.17, 0.23],
      [200, 0.45, 0.56],
      [250, 0.73, 0.85],
      [300, 1.06, 1.12],
      [400, 1.77, 2.28],
      [500, 2.84, 3.47],
    ],
  },
  {
    name: '4"-400-old',
    readings: [
      [200, 0.43, 0.59],
      [300, 1.02, 1.26],
      [400, 1.86, 2.18],
      [500, 2.95, 3.36],
      [700, 5.49, 6.9],
      [800, 7.28, 8.89],
    ],
  },
  {
    name: '5"-500-old',
    readings: [
      [250, 0.73, 1.0],
      [400, 1.99, 2.43],
      [500, 3.17, 3.72],
      [700, 6.36, 7.13],
      [800, 7.74, 9.94],
      [1000, 12.42, 15.17],
    ],
  },
  {
    name: '5"-750-old',
    readings: [
      [375, 1.64, 2.26],
      [500, 3.04, 3.86],
      [750, 7.13, 8.37],
      [900, 10.41, 11.9],
      [1200, 17.41, 22.36],
      [1500, 27.93, 34.12],
    ],
  },
  {
    name: '6"-500-old',
    readings: [
      [250, 0.2, 0.3],
      [400, 0.6, 0.8],
      [500, 1, 1.2],
      [700, 2, 2.3],
      [800, 2.5, 3.2],
      [1000, 4, 4.9],
    ],
  },
  {
    name: '6"-750-old',
    readings: [
      [375, 0.5, 0.7],
      [600, 1.4, 1.8],
      [750, 2.3, 2.7],
      [1000, 4.2, 4.7],
      [1200, 5.6, 7.2],
      [1500, 9.0, 11.0],
    ],
  },
  {
    name: '6"-1000-old',
    readings: [
      [500, 1, 1.2],
      [800, 2.6, 3.1],
      [1000, 4.1, 4.8],
      [1400, 8.2, 9.2],
      [1600, 10, 12.8],
      [2000, 16, 19.59],
    ],
  },
  {
    name: '8"-1500-old',
    readings: [
      [750, 0.7, 1.0],
      [1000, 1.4, 1.8],
      [1500, 3.2, 3.8],
      [2000, 5.9, 6.6],
      [2500, 8.6, 11.0],
      [3000, 12.7, 15.5],
    ],
  },
  {
    name: '8"-2000-old',
    readings: [
      [1000, 1.3, 1.8],
      [1500, 3.2, 3.9],
      [2000, 5.8, 6.8],
      [2500, 9.2, 10.4],
      [3000, 12.3, 16.0],
      [4000, 22.6, 27.6],
    ],
  },
  {
    name: '8"-2500-old',
    readings: [
      [1250, 2.0, 2.9],
      [1750, 4.2, 5.5],
      [2500, 8.9, 10.7],
      [3000, 13.0, 15.2],
      [4000, 22.0, 28.2],
      [5000, 35.3, 43.1],
    ],
  },
  {
    name: '10"-2000-old',
    readings: [
      [1000, 0.32, 0.45],
      [1500, 0.77, 0.95],
      [2000, 1.41, 1.65],
      [2500, 2.24, 2.54],
      [3000, 3.0, 3.91],
      [4000, 5.52, 6.74],
    ],
  },
  {
    name: '10"-3000-old',
    readings: [
      [1500, 0.73, 1.0],
      [2000, 1.35, 1.72],
      [3000, 3.17, 3.72],
      [4000, 5.75, 6.49],
      [5000, 8.44, 10.74],
      [6000, 12.42, 15.17],
    ],
  },
];

export async function seed(db) {
  // Check if any data exists first for early exit
  const existingCount = db.prepare('SELECT COUNT(*) as count FROM gvi_gauges').get().count;
  if (existingCount > 0) {
    return { inserted: 0, skipped: gviRanges.length };
  }

  // Prepare statements once
  const insertStmt = db.prepare('INSERT INTO gvi_gauges (model, ranges) VALUES (?, ?)');

  // Use transaction for batch insert - much faster
  const insertMany = db.transaction(() => {
    let inserted = 0;
    for (const gauge of gviRanges) {
      const ranges = JSON.stringify(gauge.readings.map(([gpm, psi_min, psi_max]) => ({ gpm, psi_min, psi_max })));
      insertStmt.run(gauge.name, ranges);
      inserted++;
    }
    return inserted;
  });

  const inserted = insertMany();
  return { inserted, skipped: 0 };
}

export { gviRanges };
